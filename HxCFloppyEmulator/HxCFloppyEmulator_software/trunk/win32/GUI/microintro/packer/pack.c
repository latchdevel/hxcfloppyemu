/*===========================================================================--
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------
-----------H----H--X----X-----CCCCC----22222----0000-----0000------11----------
----------H----H----X-X-----C--------------2---0----0---0----0--1--1-----------
---------HHHHHH-----X------C----------22222---0----0---0----0-----1------------
--------H----H----X--X----C----------2-------0----0---0----0-----1-------------
-------H----H---X-----X---CCCCC-----222222----0000-----0000----1111------------
-------------------------------------------------------------------------------
----------------------------------------- http://jeanfrancoisdelnero.free.fr --
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------
------------------- official Infoticaires 2006 invitation ---------------------
------------------ French Retro-Gaming party in Courcelles --------------------
--------------------------- www.obsolete-tears.com ----------------------------
----------------------------  Jeff -  14/06/2006  -----------------------------
--===========================================================================*/

#include <malloc.h>
#include <string.h> 
#include "lzw.h"
#include "rle.h"

unsigned char * mi_unpack(unsigned char * bufferin, unsigned long sizein,unsigned char * bufferout, unsigned long sizeout)
{
	unsigned char* buffer;
	buffer=(unsigned char*)malloc(sizeout+100);
	if(bufferin[0]&0x01)
	{
		lzw_expand(bufferin+1,buffer, sizeout );
	}
	else
	{
		memcpy(buffer,bufferin+1,sizeout);
	}

	return  buffer;
};
